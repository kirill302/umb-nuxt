# DOCUMENTATION # 

[nuxt documentation](https://nuxtjs.org)
[swiper documentation](https://swiperjs.com/swiper-api)
[nuxt auth](https://auth.nuxtjs.org/guide/middleware/)

__рекомендую просматривать данный файли через каке-нибудь расшрение для просмотра markdown__

```c
npm install // установить пакеты
npm run dev // запустить сервер для разработки

npm run build // скомпилировать приложение

npm run generate // генерировать статику
```


## авторизация
для авторизации я использовал схему 'local'. Поэтому она будет корректно работать только, если запустить сервер по адресу 'http://localhost:3000/'
Есть 2 компонента, в которых происходит авторизация и выход. Это `<modal-login>` и `<v-enter>`

#### Логика работы в `<modal-login>` :
Поля login и password связанны с объектом loging, в котором есть поля login и password.
При нажатии на кнопку `войти`, вызывается метод  `enter`, где проверяем, если пароль и логин равны test, то делаем `$auth.loginWith('local')`, иначе переменную `invalidLogin` меняем на `false` (от нее зависит отображение ошибки в форме)

#### Логика работы в `<v-enter>` :
В зависимости от `$auth.loggedIn` показываем либо кнопку `войти`, либо информацию о пользователе.

При нажатии кнопку выхода, вызывается `$auth.logout()`


## store
В сторе только состояния модальных окон
```js
state: {
  modalLogin: false, // состояние окна логина
  modalReg: false, // состояние окна регитсрации
  modalRestore: false, // состояние окна восстановления
}
```
для каждого из этих полей есть соответсвующий геттер, и по две мутации, одна мутация делает соответсвующую переменную `true`, при этом остальные обравщает в `false`, а вторая мутация просто обращает соответсвующую переменную в false
к примеру мутации для логина
```js
loginVisible(state) {
  state.modalLogin = true;
  state.modalReg = false; 
  state.modalRestore = false;
  state.modalBonus = false;
},
loginHide(state) {
  state.modalLogin = false;
},
```

## layout default:

помимо шапки, футера и страниц, сдесь лежат все моладлки, состояние которых берётся из стора

## дирректива v-full-img
Нужна для полноэкранного открытия изображения
Значение в нее передаём объект с заголовком и текстом, которые будут отображаться внизу картинки
```js
{
  title: 'заголовок',
  text: 'текст'
}
```
Вешать эту диррективу желательно только на тег `<img>`

стили для этой диррективы лежат в `@/assets/style/syle.scss`


## компоненты

#### `<v-modal>` 
!!!. не путать с v-model

компонент модального окна
имеет слоты:
* `title` - заголовок модалки (сделан на основе `<g-title>`)
* `lines` - блок с линиями вверху и внизу (сделан на основе `<lines-block>`)
* можно просто вставить контент в компонент модалки, он вставится под блоком с линиями

есть пропсы для гибкогой настройки:
`:visible` - передаём булевую переменную, в которой содержится видимость окна
`:title` - (по дефолту `true`) если нужно убрать заголовок, прокидываем в этот пропс `false`
`:lines` - то же самое, что и заголовок, только для блока с линиями
`:closeAbility` - возможность закрыть модалку (по дефолту `true`)

при нажатии на клавишу `escape` или нажатии в любую область, кроме модального окна генерируется событие `@hide`, подписываемся на это событие, и закрываем окно (если :closeAbility = false, событие @hide не генерируется)
```html
<v-modal :visible="modalVisible" @hide="modalVisible = false">
  <template v-slot:title>Заголовок модало4ки</template>
  <template v-slot:lines>Контент блока с линиями</template>
  контент, который отображается под блоком с линиями
</v-modal>
```

#### `<v-page>`
компонент для страниц личного кабинета, имеет 2 слота:
`:title` - заголовок (сделан на основе комнонента `<tit-h2>`)
`:content` - заголовок


#### `<v-text>`
компонент текста
просто кладём в этот компонент нужный нам текст

#### `<tit-h2>`
заголовок 2-ого уровня.
можно настраивать классами
* `_uppercase` - все буквы станут заглавными
* `_line` - добавляет линию с ромбиком под заголовок (это svg изображение '@/assets/img/title-line.svg')

в нутрь заголовка можно положить элемент с классом `mark` он будет красным

```html
<tit-h2>Заголовок <span class="mark">страницы</span></tit-h2>
```

#### `<v-quote>`
цитата
имеет 2 слота:
`title` - заголовок цитаты
`text` - текст цитаты 
``` html
<v-quote class="">
  <template v-slot:title> Заголовок </template>
    <template v-slot:text>текст</template>
</v-quote>
```

#### `<v-enter>` 
если пользователь не авторизован - отображается кнопка `войти`, если авторизован, то данные пользователя, реализрванно это через `v-if`

#### `<v-header>`
шапка.
#### `<v-footer>`
футер.

#### `.v-button`
класс кнопки (изначально пустая, если нужна иконка, вкладываем её внутрь класса)
класс описан в компоненте `v-button`
```html
<button class="v-button"> 
  текст кнопки
  <иконка> <!-- желательно вставить svg или спрайт-->
</button>
```

#### `<b-select>`
выпадающий список
имеет пропс `:options`, передаём в него массив объектов с полями `id` и `text`
```html
<b-select :options=' [
  { id: 0, text: "7 дней" },
  { id: 1, text: "14 дней" },
  { id: 2, text: "30 дней" },
  { id: 3, text: "90 дней" },
  { id: 4, text: "180 дней" },
]
'>
```

#### `<g-title>`
заголовок `<h3>` с линиями по бокам и цветом градиентом
очень кибко настраивается при помощи классов:
* `.line-small` - маленькие линии по бокам
* `.no-mobile-line` - при ширине менее 567px линиии по бокам пропадут
* `.no-line` - линий не будет вообще
* `.fz-24` - размер шрифта 24px (на пк)
* `.fz-20` - размер шрифта 20px (на пк)
* `.fz-14` - размер шрифта 14px
* `.left` - text-align: left !important;
* `.color-white` - color: #fff;
* `.ttn` - text-transform: none;
* `.fw-500` - font-weight: 500;
* `.fw-900` - font-weight: 900;

#### `<v-input>` 
Стилизованный инпут имеет класс
`.invalid`, что означает, что поле не прошло валидацию

__важно:__ при типе `password` инпуту выдаётся font-family: 'password', в этом шрифте стандартные браузерные символы пароля заменены на звёздочки *

#### `<icon-input>`
!!!. создан на основе компонента `v-input`

инпут, внутрь которого можно вставить иконку (просто вставляем нужно нам изображение в кломпонент и всё)

```html
<icon-input>
  <иконка>
</iсon-input>
```
имеет пропсы:
`:disabled` - дисаблед (Boolean)
`:invalid` - не валиден (Boolean)
`:placeholder` - плейсхолдер (String)
`:type` - тип (String)
`:tabIndex` - таб индекс (Number)

#### `<v-check>`
!!!. стилизованн спомощью svg изображений
кастомный чекбокс

имеет пропсы:
`:id` - айди (String)
`:disabled` - дисаблед (Boolean)
`:checked` - зачеканный (Boolean)




## примечания по каждой станице и их блокам

### `index`
страница состоит из 4-ёх блоков, которые лежат в `components/homeBloks`
#### `home-intro`
этот блок состоит из 2-ух свайперов, слайдер картинок имеет кантроль над слайдером текстовых блоков внизу,
оба этих слайдера создаются на основе массива `slierArr`, вот пример одного объекта из этого массива:

``` js
{
  id: 0,
  title: "WARD TRACKER1", // заголовок тектового блока
  text: "1 Всегда знай, какие способности у вражеских героев не изучены, на сколько прокачаны, перезаряжаются ли и на что хватает маны", // текст текстового блока
  img: "intro-slide1.jpg", // путь к картинке
  num: '04', // номер, который отображается в уголке слайда
  pos: "0% 0%", // мы можем настраивать положение картинки для верхнего слада, значение из этого свойства улетает в свойстово object-position для картинки
  scale: "2.8", // для изменения масштаба (так же для настройки отобращения картинки в слайдере), значение из этого свойства улетит в transform: scale() для картинки
},
```

### страница `tarif`
страница созданна на основе компонента `v-page`
Все компоненты для этой страницы находятся в `components/tarif-bloks`
#### `<v-status>`
статус подписки (это где линия из квадратиков я фиг знает как этот компонент назвать)

имеет пропс `:value` (число от 0 до 100)

этот компонент отображает проценты в квадратиках 
как это работает:

есть 3 переменные 
* `statusArr` - массив на основе которого выводим квадратики
* `max` - количество квадратиков (если ширина окна больше 768, то эта переменная будет 50, иначе 25)
* `index` - (если ширина окна больше 820, то эта переменная будет 2, иначе 4), мы должны визуализировать проценты в квадратиках, их 100, а квадратиков 50, т.е чтобы получить, проценты в квадратиках, нужно разделить значение на 2 (а если мобильная версия, то квадратиков 25, и значение делим на 4)

```js
data() {
  return {
    statusArr: [], //массив на основе которого будем выводить квадратики
    max: window.innerWidth > 820 ? 50 : 25, // кол-во квадратиков
    index: window.innerWidth > 820 ? 2 : 4, // индекс
  }
},
mounted() {
  let arr = []; // создаём массив на основе которого будем выводить квадратики
  for (let i = 0; i < this.max; i++) { // заполняем массив 
    if (i < this.value / this.index) { // если i меньше значения, то добавим 1
      arr.push(1);
    } else {
      arr.push(0); // иначе добавим 0
    }
  }
  this.statusArr = arr; // присвоим созданный массив в statusArr
}
```
```html
<div class="v-status" :class="!value ? 'disabled' : ''">
    <span 
      v-for="item in statusArr" # выводим циклом наши квадратики
      :key="item + Math.random()" # рандомный ключ, чтобы линтер не ругался
      :class="item ? 'active' : ''" # если текущий элемент 1, то условие пройдёт, и квадратику будет выдан класс `active`, что сделает его красным, а если 0, то квадратик будет просто серый
    ></span>
  </div>
```



#### `<v-range>`
Компонент с ползунком.

Как это работает?
У ползунка есть `min=1` и `max=8`, что делит его на 8 равный частей, далее я с помощью `position: absolute` расставляю элементы `.range__index` с помощью `nth-child()` от 1 до 8.
Мы имеем 2 переменные: 
* `vRange` - это непосредсвенно значение самого инпута (от 1 до 8)
* `value` - это номер активного элемента (от 1 до 6)

Мы слеим за ползунком, 
и когда его значение 5 (между 30 и 90 дней) мы устанавливаем `vRange` на 6 (90 дней) а `value` на 5 (т.к это пятый элемент), 
то же самое и когда ползунок на 7 (между 90 и 180 дней) мы устанавливаем `vRange` на 8 (180 дней), а `value` на 6 (т.к это 6 элемент)
Именно `value` мы отдаем на верх, после всех манипуляций `this.$emit("input", this.value)`.
И в родительском компоненте (на странице `tarif`) мы подписываемся на событие `@input` и вызываем метод `profitCalculator`, где в зависимости от значения, выщитываем нужные нам цифры.

В зависимости от значения `value` в компоненте `v-range`, корневому элменту компонента выдаётся класс `r-1`, `r-2` и тд, от этих классов зависит фон инпута (он сделан градиентом, и в зависимости от класса. мы увеличиваем размер бакгроунда)
вот пример фона инпута, `$size` - эти значения в процентах, которые меняются на нужные
```scss
// меняю я значение фона в нутри классов `r-1`, `r-2` и тд
.range__input {
  background: linear-gradient(
        90deg,
        rgba(195, 71, 80, 1) 0%,
        rgba(82, 127, 225, 1) $size,
        rgba(76, 81, 85, 1) $size
      );
}
```